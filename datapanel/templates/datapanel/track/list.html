{%extends 'datapanel/datapanel_base.html'%}
{% block title %}
	{{project.name}} - 访问量参数分析
{% endblock title %}
{% block subnav-track %}
<li class="active">
	<a href="{%url stream_list project.id%}">访问量参数分析</a>
</li>
{% endblock subnav-track %}
{% block content %}
<script type="text/javascript" src="{{STATIC_URL}}js/bootstrap-datepicker.js"></script>
<link rel="stylesheet" type="text/css" href="{{STATIC_URL}}css/datepicker.css"></link>
<div class="span10">
	<div class="page-header">
		<h1>{{project.name}} / 访问路径</h1>
	</div>
	<div class="span8">
		<table class="table table-striped table-bordered">
			<tr>
				<th id="table_header2">
					Group
				</th>
				<th>
					数量
				</th>
			</tr>
			{% for track in track_list %}
			<tr>
				<!--<td>{%firstof track.track__action track.track__url track.track__step%}</td>-->
				<td>{{track.value|urlizetrunc:30 }}</td>
				<td>{{track.c}}</td>
			</tr>
			{% endfor %}
		</table>
		<div class="pagination pagination-right">
		 <input type="text" class="input-small pull-left" >
		 <button type="submit" class="btn pull-left" id="btn_goto_page">跳转</button>
		  <ul>
		  	<li class="disabled">
		 	<a>{{ track_list.number }} / {{ track_list.paginator.num_pages }}</a>
		 	</li>
		  	{% if track_list.has_previous %}
		    <li>
		    	<a href="?{{params.querystr}}&page={{ track_list.previous_page_number }}">上一页</a>
		    </li>
		    {% else %}
		    <li class="disabled"><a>上一页</a></li>
		    {% endif %}
		    {% if track_list.has_next %}
		    <li>
		    	<a href="?{{params.querystr}}&page={{ track_list.next_page_number }}">下一页</a>
		    </li>
		    {% else %}
		    <li class="disabled"><a>下一页</a></li>
		    {% endif %}
		  </ul>
		</div>
	</div>
	<div class="span2">
		<form class="form-horizontal">
		<p>
			<h4>选择时间段</h4>
	  	</p>
		<p>
	      <input type="text" class="input datepicker" id="id_start_date" name="start_date" placeholder="开始日期" />
	  	</p>
		<p>
	      <input type="text" class="input datepicker" id="id_end_date" name="end_date" placeholder="截至日期" />
	  	</p>
		<!-- <p>
			<h4>选择统计值</h4>
	  	</p>
		<p>
	      <select id="id_value" name="value">
	      	<option value="action">动作名称</option>
	      	<option value="step">步骤数</option>
	      	<option value="url">url</option>
	      </select>
	  	</p> -->
		<p>
			<h4>选择聚合列</h4>
	  	</p>
		<p>
	      <select id="id_groupby" name="groupby">
	      	{%for value_name in value_names%}
	      	<option value="{{value_name.name}}">{{value_name.name}}</option>
	      	{%endfor%}
	      </select>
	  	</p>
		<p>
	      <button type="submit" class="btn">确定</button>
	  	</p>
		</form>
	</div>
</div>
<script type="text/javascript">
$(function(){
	$(".datepicker").datepicker({'format':'yyyy-mm-dd'});
	// $("#id_value").val("{{params.value}}");
	// $("#table_header1").text($("#id_value option:selected").text());
    $("#id_groupby").val("{{params.groupby}}");
	// $("#table_header2").text($("#id_groupby option:selected").text());
	$("#id_start_date").val("{{params.start_date}}");
	$("#id_end_date").val("{{params.end_date}}");


});</script>
{% endblock content %}
